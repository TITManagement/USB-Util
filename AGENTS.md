# エージェント運用ルール（共通）

## 実行前の確認
- コマンド提案の前に必ず `pwd` を実行して現在地を提示する。( `pwd` の実行に許可は不要。)

- 現在地を提示した後に、実行予定のコマンドを提案する。
- 実行は必ずユーザーの許可を得てから行う。
  - ただし読み取り専用コマンドは許可なく実行してよい。
  - 変更・破壊系コマンドは必ず都度許可を得る。
- 読み取り専用コマンドの例: `pwd`, `ls`, `rg`, `sed`, `cat`, `git status`, `git diff` など
- 変更・破壊系コマンドの例: `rm`, `mv`, `cp`, `git add/commit/push/clean/restore`, `apply_patch` など

## コミュニケーション
- 会話やcommit文の提案は全て日本語で行う。

## コード編集
- 変更対象ファイルを明示してから編集する。
- 意図しないファイル変更が見つかった場合は直ちに相談する。
- 生成物（ビルド成果物、仮想環境など）はコミット対象に含めない。

## Git 操作
- 破壊的コマンド（`reset --hard`, `checkout --` 等）は使用しない。
- 既存変更を勝手に破棄しない。
- コミット前に `git status` で差分の確認を行う。

## 破壊的操作の安全策（再発防止）
- `rm` / `git submodule deinit` / `git rm --cached` などの破壊的操作は、実行前に「影響範囲」「失われる可能性」「復旧方法（バックアップ or 再取得手順）」を必ず提示する。
- 破壊的操作はユーザーの明示許可がある場合のみ実行する（「この手順で実行する」との明示承認が必要）。
- 破壊的操作の前に、ドライランまたは状態確認コマンドを必ず挟む。
- サブモジュール解除は、作業ツリーの退避または複製を先に行う（退避なしで deinit しない）。
- 不確実性やリスクが残る場合は、実行を保留して質問し、許可が出るまで進めない。

## 出力方針
- 重要な結果は短く要約して伝える。
- 不明点があれば先に質問して確認する。
