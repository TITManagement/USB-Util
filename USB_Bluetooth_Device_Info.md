# USB・Bluetoothデバイス情報取得ツール 説明書

---

## 概要

本ツールは、USBデバイスおよびBluetoothデバイスの情報をスキャンし、詳細情報をGUIで表示・保存・補完するPythonアプリケーションです。
USBデバイスはPyUSBを利用して取得し、`usb.ids`データベースによるベンダー名・製品名の補完、JSON形式での保存、CustomTkinterによるGUI表示を行います。
Bluetoothデバイスは、今後の拡張で`pybluez`や`bleak`などのライブラリを利用し、MACアドレス・デバイス名・サービス情報などを取得・表示できるようになります。

---

## 主な機能

| 種類         | USBデバイス（取得可能）                                | Bluetoothデバイス（拡張時に取得可能）             |
|--------------|------------------------------------------------------|---------------------------------------------------|
| 識別子       | ベンダーID（VID）、プロダクトID（PID）                | MACアドレス                                       |
| 名称         | ベンダー名（usb.ids）、製品名（usb.ids）、Manufacturer、Product | デバイス名                                        |
| シリアル     | シリアル番号                                         | なし（取得不可が多い）                            |
| クラス情報   | デバイスクラス、サブクラス、プロトコル、Class Guess   | デバイスクラス（Major/Minor Class）               |
| 接続情報     | バス番号、アドレス、ポートパス                        | RSSI（受信信号強度）、ペアリング状態              |
| 階層情報     | コンフィギュレーション、インターフェース、エンドポイント| サービスUUID一覧、サポートプロファイル            |
| バージョン   | デバイスバージョン                                   | 一部OSでバージョンやメーカー情報                  |
| その他       | 消費電力、パケットサイズ、エラー情報                  | サービス属性、プロファイル（A2DP, HIDなど）       |

---

## USBデバイスについて

- **ディスクリプタ構造**  
  USBは階層的なディスクリプタ（デバイス→コンフィグ→インターフェース→エンドポイント）で詳細なハードウェア情報が取得できます。
- **ベンダー/製品名補完**  
  `usb.ids`データベースを参照し、VID/PIDからベンダー名・製品名を自動補完します。
- **情報例**  
  VID/PID、ベンダー名、製品名、シリアル番号、クラス情報、バス番号、アドレス、ポートパス、消費電力など

---

## Bluetoothデバイスについて

- **MACアドレス**  
  Bluetoothデバイスの一意識別子。先頭3バイト（OUI）からメーカー（ベンダー）を判別可能です。
- **デバイス名・サービス情報**  
  デバイス名や機能（サービスUUID、プロファイル）は、BluetoothプロトコルのInquiryやSDP（サービスディスカバリ）で実際のデバイスから取得します。  
  ※MACアドレスのみでは規格元からデバイス名や機能は参照できません。
- **取得例**  
  MACアドレス、デバイス名、クラス情報、RSSI、サービスUUID、ペアリング状態など

---

## 動作要件

- Python 3.9 以降
- PyUSB (`pip install pyusb`)
- CustomTkinter (`pip install customtkinter`)
- OSごとのlibusbバックエンド（macOS: `brew install libusb`、Ubuntu: `sudo apt install libusb-1.0-0`）
- Bluetooth対応時は `pybluez` や `bleak` などのライブラリが必要

---

## 使い方

1. 必要なライブラリ・バックエンドをインストールします。
2. `usb.ids`ファイルをプロジェクトルートまたは環境変数 `USB_IDS_PATH` で指定します。
3. Python仮想環境を有効化し、`main.py` を実行します。

```zsh
python main.py
```

4. GUIが起動し、USBデバイス一覧・詳細情報が表示されます。  
   Bluetooth対応時は、Bluetoothデバイス一覧も同様に表示される予定です。

---

## 注意事項

- BluetoothのMACアドレスからは「メーカー（OUI）」「一意識別」「通信履歴」などが分かりますが、  
　デバイス名や機能は実機スキャンやサービス情報取得が必要です（規格元からは参照不可）。
- USBは物理接続・転送仕様中心、Bluetoothは無線通信・サービス中心の情報体系です。

---

## 拡張・カスタマイズ

- Bluetooth対応時は、`UsbScanner`相当のクラス追加、データ構造拡張、GUI切り替え等で実装可能です。
- 取得項目や表示レイアウトは用途に応じてカスタマイズできます。

---

## ライセンス

本ツールのライセンスはリポジトリのLICENSEファイルをご参照ください。

---

ご質問や機能追加のご要望があれば、READMEやドキュメントに追記可能です。
